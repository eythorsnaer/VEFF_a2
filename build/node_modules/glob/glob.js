function glob(t,s,i){if("function"==typeof s&&(i=s,s={}),s||(s={}),"number"==typeof s)return void deprecated();var e=new Glob(t,s,i);return e.sync?e.found:e}function deprecated(){throw new Error("glob's interface has changed. Please see the docs.")}function globSync(t,s){return"number"==typeof s?void deprecated():(s=s||{},s.sync=!0,glob(t,s))}function Glob(t,s,i){function e(t,s,i){this._process(t,0,s,function(t){t&&this.emit("error",t),--o<=0&&this._finish()})}if(!(this instanceof Glob))return new Glob(t,s,i);"function"==typeof s&&(i=s,s=null),"function"==typeof i&&(this.on("error",i),this.on("end",function(t){i(null,t)})),s=s||{},this._endEmitted=!1,this.EOF={},this._emitQueue=[],this.paused=!1,this._processingEmitQueue=!1,this.maxDepth=s.maxDepth||1e3,this.maxLength=s.maxLength||1/0,this.cache=s.cache||{},this.statCache=s.statCache||{},this.changedCwd=!1;var r=process.cwd();if(s.hasOwnProperty("cwd")?(this.cwd=s.cwd,this.changedCwd=path.resolve(s.cwd)!==r):this.cwd=r,this.root=s.root||path.resolve(this.cwd,"/"),this.root=path.resolve(this.root),"win32"===process.platform&&(this.root=this.root.replace(/\\/g,"/")),this.nomount=!!s.nomount,!t)throw new Error("must provide pattern");if(s.matchBase&&-1===t.indexOf("/")){if(s.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}this.strict=s.strict!==!1,this.dot=!!s.dot,this.mark=!!s.mark,this.sync=!!s.sync,this.nounique=!!s.nounique,this.nonull=!!s.nonull,this.nosort=!!s.nosort,this.nocase=!!s.nocase,this.stat=!!s.stat,this.debug=!!s.debug||!!s.globDebug,this.debug&&(this.log=console.error),this.silent=!!s.silent;var h=this.minimatch=new Minimatch(t,s);this.options=h.options,t=this.pattern=h.pattern,this.error=null,this.aborted=!1,this._globstars={},EE.call(this);var o=this.minimatch.set.length;this.matches=new Array(o),this.minimatch.set.forEach(e.bind(this))}function alphasorti(t,s){return t=t.toLowerCase(),s=s.toLowerCase(),alphasort(t,s)}function alphasort(t,s){return t>s?1:s>t?-1:0}function gsKey(t){return"**"+t.map(function(t){return t===minimatch.GLOBSTAR?"**":""+t}).join("/")}function absWin(t){if(absUnix(t))return!0;var s=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,i=s.exec(t),e=i[1]||"",r=e&&":"!==e.charAt(1),h=!!i[2]||r;return h}function absUnix(t){return"/"===t.charAt(0)||""===t}module.exports=glob;var fs=require("fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),isDir={},assert=require("assert").ok;glob.fnmatch=deprecated,glob.sync=globSync,this._processingEmitQueue=!1,glob.Glob=Glob,inherits(Glob,EE),Glob.prototype.log=function(){},Glob.prototype._finish=function(){assert(this instanceof Glob);for(var t=this.nounique,s=t?[]:{},i=0,e=this.matches.length;e>i;i++){var r=this.matches[i];if(this.log("matches[%d] =",i,r),r){var h=Object.keys(r);t?s.push.apply(s,h):h.forEach(function(t){s[t]=!0})}else if(this.nonull){var o=this.minimatch.globSet[i];t?s.push(o):s[o]=!0}}t||(s=Object.keys(s)),this.nosort||(s=s.sort(this.nocase?alphasorti:alphasort)),this.mark&&(s=s.map(this._mark,this)),this.log("emitting end",s),this.EOF=this.found=s,this.emitMatch(this.EOF)},Glob.prototype._mark=function(t){var s=this.cache[t],i=t;if(s){var e=2===s||Array.isArray(s),r="/"===t.slice(-1);e&&!r?i+="/":!e&&r&&(i=i.slice(0,-1)),i!==t&&(this.statCache[i]=this.statCache[t],this.cache[i]=this.cache[t])}return i},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.sync&&this.emit("error",new Error("Can't pause/resume sync glob")),this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){this.paused&&(this.sync&&this.emit("error",new Error("Can't pause/resume sync glob")),this.paused=!1,this.emit("resume"),this._processEmitQueue())},Glob.prototype.emitMatch=function(t){this.log("emitMatch",t),this._emitQueue.push(t),this._processEmitQueue()},Glob.prototype._processEmitQueue=function(t){function s(s,e){this.log("next",t,s,e);var r=t===this.EOF?"end":"match";assert(!this._endEmitted),"end"===r&&(this._endEmitted=!0),s&&(e&&!t.match(/\/$/)?t+="/":!e&&t.match(/\/$/)&&(t=t.replace(/\/+$/,""))),this.log("emit",r,t),this.emit(r,t),this._processingEmitQueue=!1,i&&t!==this.EOF&&!this.paused&&this._processEmitQueue()}this.log("pEQ paused=%j processing=%j m=%j",this.paused,this._processingEmitQueue,t);for(var i=!1;!this._processingEmitQueue&&!this.paused;){this._processingEmitQueue=!0;var t=this._emitQueue.shift();if(this.log(">processEmitQueue",t===this.EOF?":EOF:":t),!t){this.log(">processEmitQueue, falsey m"),this._processingEmitQueue=!1;break}if(t===this.EOF||!this.mark||this.stat)this.log("peq: unmarked, or eof"),s.call(this,0,!1);else if(this.statCache[t]){var e,r=this.statCache[t];r&&(e=r.isDirectory()?2:1),this.log("peq: stat cached"),s.call(this,e,2===e)}else this.log("peq: _stat, then next"),this._stat(t,s)}i=!0},Glob.prototype._process=function(t,s,i,e){assert(this instanceof Glob);var r=function(t,s){assert(this instanceof Glob),this.paused?(this._processQueue||(this._processQueue=[],this.once("resume",function(){var t=this._processQueue;this._processQueue=null,t.forEach(function(t){t()})})),this._processQueue.push(e.bind(this,t,s))):e.call(this,t,s)}.bind(this);if(this.aborted)return r();if(s>this.maxDepth)return r();for(var h=0;"string"==typeof t[h];)h++;var o;switch(h){case t.length:return o=t.join("/"),void this._stat(o,function(t,s){return t&&(o&&isAbsolute(o)&&!this.nomount&&(o="/"===o.charAt(0)?path.join(this.root,o):path.resolve(this.root,o)),"win32"===process.platform&&(o=o.replace(/\\/g,"/")),this.matches[i]=this.matches[i]||{},this.matches[i][o]=!0,this.emitMatch(o)),r()});case 0:o=null;break;default:o=t.slice(0,h),o=o.join("/")}var a;return null===o?a=".":isAbsolute(o)||isAbsolute(t.join("/"))?(o&&isAbsolute(o)||(o=path.join("/",o)),a=o=path.resolve(o),this.log("absolute: ",o,this.root,t,a)):a=o,this.log("readdir(%j)",a,this.cwd,this.root),this._readdir(a,function(e,a){if(e)return r();if(t[h]===minimatch.GLOBSTAR){var n=[t.slice(0,h).concat(t.slice(h+1))];if(a.forEach(function(s){("."!==s.charAt(0)||this.dot)&&(n.push(t.slice(0,h).concat(s).concat(t.slice(h+1))),n.push(t.slice(0,h).concat(s).concat(t.slice(h))))},this),n=n.filter(function(t){var s=gsKey(t),i=!this._globstars[s];return this._globstars[s]=!0,i},this),!n.length)return r();var c=n.length,u=null;return void n.forEach(function(t){this._process(t,s+1,i,function(t){return u?void 0:t?r(u=t):--c<=0?r():void 0})},this)}var l=(t[h],t[h]._glob),p=this.dot||"."===l.charAt(0);if(a=a.filter(function(s){return("."!==s.charAt(0)||p)&&s.match(t[h])}),h===t.length-1&&!this.mark&&!this.stat)return a.forEach(function(t){o&&(t="/"!==o?o+"/"+t:o+t),"/"!==t.charAt(0)||this.nomount||(t=path.join(this.root,t)),"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this.matches[i]=this.matches[i]||{},this.matches[i][t]=!0,this.emitMatch(t)},this),r.call(this);var c=a.length,u=null;return 0===c?r():void a.forEach(function(e){var o=t.slice(0,h).concat(e).concat(t.slice(h+1));this._process(o,s+1,i,function(t){return u?void 0:t?r(u=t):0===--c?r.call(this):void 0})},this)})},Glob.prototype._stat=function(t,s){assert(this instanceof Glob);var i=t;if("/"===t.charAt(0)?i=path.join(this.root,t):this.changedCwd&&(i=path.resolve(this.cwd,t)),t.length>this.maxLength){var e=new Error("Path name too long");return e.code="ENAMETOOLONG",e.path=t,this._afterStat(t,i,s,e)}if(this.log("stat",[this.cwd,t,"=",i]),!this.stat&&this.cache.hasOwnProperty(t)){var r=this.cache[t],h=r&&(Array.isArray(r)||2===r);return this.sync?s.call(this,!!r,h):process.nextTick(s.bind(this,!!r,h))}var o=this.statCache[i];if(this.sync||o){var e;try{o=fs.statSync(i)}catch(a){e=a}this._afterStat(t,i,s,e,o)}else fs.stat(i,this._afterStat.bind(this,t,i,s))},Glob.prototype._afterStat=function(t,s,i,e,r){var h;assert(this instanceof Glob),"/"===s.slice(-1)&&r&&!r.isDirectory()&&(this.log("should be ENOTDIR, fake it"),e=new Error("ENOTDIR, not a directory '"+s+"'"),e.path=s,e.code="ENOTDIR",r=null);var o=!this.statCache[s];this.statCache[s]=r,e||!r?h=!1:(h=r.isDirectory()?2:1,o&&this.emit("stat",t,r)),this.cache[t]=this.cache[t]||h,i.call(this,!!h,2===h)},Glob.prototype._readdir=function(t,s){assert(this instanceof Glob);var i=t;if("/"===t.charAt(0)?i=path.join(this.root,t):isAbsolute(t)?i=t:this.changedCwd&&(i=path.resolve(this.cwd,t)),t.length>this.maxLength){var e=new Error("Path name too long");return e.code="ENAMETOOLONG",e.path=t,this._afterReaddir(t,i,s,e)}if(this.log("readdir",[this.cwd,t,i]),this.cache.hasOwnProperty(t)){var r=this.cache[t];if(Array.isArray(r))return this.sync?s.call(this,null,r):process.nextTick(s.bind(this,null,r));if(!r||1===r){var h=r?"ENOTDIR":"ENOENT",e=new Error((r?"Not a directory":"Not found")+": "+t);return e.path=t,e.code=h,this.log(t,e),this.sync?s.call(this,e):process.nextTick(s.bind(this,e))}}if(this.sync){var e,o;try{o=fs.readdirSync(i)}catch(a){e=a}return this._afterReaddir(t,i,s,e,o)}fs.readdir(i,this._afterReaddir.bind(this,t,i,s))},Glob.prototype._afterReaddir=function(t,s,i,e,r){if(assert(this instanceof Glob),r&&!e)return this.cache[t]=r,this.mark||this.stat||r.forEach(function(s){s="/"===t?t+s:t+"/"+s,this.cache[s]=!0},this),i.call(this,e,r);if(e)switch(e.code){case"ENOTDIR":return this.cache[t]=1,i.call(this,e);case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":return this.cache[t]=!1,i.call(this,e);default:return this.cache[t]=!1,this.strict&&this.emit("error",e),this.silent||console.error("glob error",e),i.call(this,e)}};var isAbsolute="win32"===process.platform?absWin:absUnix;